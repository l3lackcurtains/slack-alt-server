(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1212:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(7),r=a.n(n);class s extends r.a.PureComponent{render(){return r.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18"},r.a.createElement("g",{id:"Developer-Export",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},r.a.createElement("g",{transform:"translate(-285.000000, -933.000000)",id:"All-Team-Members"},r.a.createElement("g",{transform:"translate(245.000000, 698.000000)"},r.a.createElement("g",{id:"Channel-Administrators",transform:"translate(0.000000, 106.000000)"},r.a.createElement("g",{id:"data-table/column-1",transform:"translate(11.000000, 86.000000)"},r.a.createElement("g",{id:"row-checkbox---Public-Channels",transform:"translate(12.000000, 35.000000)"},r.a.createElement("g",{id:"Stacked-Group",transform:"translate(0.000000, 5.000000)"},r.a.createElement("g",{id:"data-table/1st/row-checkbox-label-base"},r.a.createElement("g",{id:"check-on-copy-11",transform:"translate(14.000000, 0.000000)"},r.a.createElement("path",{d:"M19,3 L5,3 C3.9,3 3,3.9 3,5 L3,19 C3,20.1 3.9,21 5,21 L19,21 C20.1,21 21,20.1 21,19 L21,5 C21,3.9 20.1,3 19,3 L19,3 Z M10,17 L5,12.1923077 L6.4,10.8461538 L10,14.3076923 L17.6,7 L19,8.34615385 L10,17 L10,17 Z",id:"checkbox---checked"})))))))))))}}},1966:function(e,t,a){e.exports=a.p+"files/c30f3344788f93968f046bd9472d5cd5.png"},1967:function(e,t,a){e.exports=a.p+"files/5e67801b5620f74e65d64b17d9d7297c.png"},1968:function(e,t,a){e.exports=a.p+"files/5ebcaf72977c6c3ca8b636edcc2677f1.svg"},1998:function(e,t,a){"use strict";a.r(t);var n=a(310),r=a(17),s=a(14),i=a(19),o=(a(61),a(33)),l=a.n(o),c=a(7),d=a.n(c),p=a(1108),m=a(1966),g=a.n(m),h=a(1967),u=a.n(h),f=a(1968),b=a.n(f),E=a(1116),w=a(1212),k=a(1220),L=a(0),_=a(13),v=a(15);function M(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class P extends c.PureComponent{constructor(e){super(e),M(this,"clearLandingPreferenceIfNotChecked",()=>{this.state.navigating||k.a.clearLandingPreference(this.props.siteUrl)}),M(this,"checkLandingPreferenceBrowser",()=>{const e=k.a.getLandingPreference(this.props.siteUrl);return e&&e===L.s.BROWSER}),M(this,"checkLandingPreferenceApp",()=>{const e=k.a.getLandingPreference(this.props.siteUrl);return e&&e===L.s.MATTERMOSTAPP}),M(this,"handleChecked",()=>{this.state.rememberChecked&&k.a.clearLandingPreference(this.props.siteUrl),this.setState({rememberChecked:!this.state.rememberChecked})}),M(this,"setPreference",(e,t)=>{if(this.state.rememberChecked)switch(e){case L.s.MATTERMOSTAPP:k.a.setLandingPreferenceToMattermostApp(this.props.siteUrl);break;case L.s.BROWSER:k.a.setLandingPreferenceToBrowser(this.props.siteUrl)}else t&&k.a.clearLandingPreference()}),M(this,"openMattermostApp",()=>{this.setPreference(L.s.MATTERMOSTAPP),this.setState({redirectPage:!0}),window.location.href=this.state.nativeLocation}),M(this,"openInBrowser",()=>{this.setPreference(L.s.BROWSER),window.location.href=this.state.location}),M(this,"renderSystemDialogMessage",()=>v.n()?d.a.createElement(p.a,{id:"get_app.systemDialogMessageMobile",defaultMessage:"View in App"}):d.a.createElement(p.a,{id:"get_app.systemDialogMessage",defaultMessage:"View in Desktop App"})),M(this,"renderGoNativeAppMessage",()=>d.a.createElement("a",{href:_.Z()?"#":this.state.nativeLocation,onMouseDown:()=>{this.setPreference(L.s.MATTERMOSTAPP,!0)},onClick:()=>{if(this.setState({redirectPage:!0,navigating:!0}),_.Z()){if(v.b()){const e=setTimeout(()=>{window.location.replace(this.getDownloadLink())},2e3);window.addEventListener("blur",()=>{clearTimeout(e)})}window.location.replace(this.state.nativeLocation)}},className:"btn btn-primary btn-lg get-app__download"},this.renderSystemDialogMessage())),M(this,"getDownloadLink",()=>v.l()?this.props.iosAppLink:v.b()?this.props.androidAppLink:this.props.desktopAppLink),M(this,"handleBrandImageError",()=>{this.setState({brandImageError:!0})}),M(this,"renderCheckboxIcon",()=>this.state.rememberChecked?d.a.createElement(w.a,null):null),M(this,"renderGraphic",()=>v.n()?d.a.createElement("img",{src:u.a}):d.a.createElement("img",{src:g.a})),M(this,"renderDownloadLinkText",()=>v.n()?d.a.createElement(p.a,{id:"get_app.dontHaveTheMobileApp",defaultMessage:"Don't have the Mobile App?"}):d.a.createElement(p.a,{id:"get_app.dontHaveTheDesktopApp",defaultMessage:"Don't have the Desktop App?"})),M(this,"renderDownloadLinkSection",()=>{const e=this.getDownloadLink();return this.state.redirectPage?d.a.createElement("div",{className:"get-app__download-link"},d.a.createElement(E.b,{id:"get_app.openLinkInBrowser",defaultMessage:"Or, [open this link in your browser.](!{link})",values:{link:this.state.location}})):e?d.a.createElement("div",{className:"get-app__download-link"},this.renderDownloadLinkText()," ",d.a.createElement("br",null),d.a.createElement("a",{href:e},d.a.createElement(p.a,{id:"get_app.downloadTheAppNow",defaultMessage:"Download the app now."}))):null}),M(this,"renderDialogHeader",()=>{const e=this.getDownloadLink(),t=v.n();let a=d.a.createElement(p.a,{id:"get_app.openingLink",defaultMessage:"Opening link in Mattermost..."});if(this.props.enableCustomBrand&&(a=d.a.createElement(p.a,{id:"get_app.openingLinkWhiteLabel",defaultMessage:"Opening link in the Desktop App..."})),this.state.redirectPage)return d.a.createElement("div",{className:"get-app__launching"},a,d.a.createElement("div",{className:"get-app__alternative".concat(this.state.redirectPage?" redirect-page":"")},d.a.createElement(p.a,{id:"get_app.redirectedInMoments",defaultMessage:"You will be redirected in a few moments."}),d.a.createElement("br",null),this.renderDownloadLinkText()," ",d.a.createElement("br",{className:"mobile-only"}),d.a.createElement("a",{href:e},d.a.createElement(p.a,{id:"get_app.downloadTheAppNow",defaultMessage:"Download the app now."}))));let n=d.a.createElement(p.a,{id:"get_app.ifNothingPrompts",defaultMessage:"You can view {siteName} in the desktop app or continue in your web browser.",values:{siteName:this.props.enableCustomBrand?"":" Mattermost"}});return t&&(n=d.a.createElement(p.a,{id:"get_app.ifNothingPromptsMobile",defaultMessage:"You can view {siteName} in the mobile app or continue in your web browser.",values:{siteName:this.props.enableCustomBrand?"":" Mattermost"}})),d.a.createElement("div",{className:"get-app__launching"},d.a.createElement(p.a,{id:"get_app.launching",defaultMessage:"Where would you like to view this?"}),d.a.createElement("div",{className:"get-app__alternative"},n))}),M(this,"renderDialogBody",()=>this.state.redirectPage?d.a.createElement("div",{className:"get-app__dialog-body"},this.renderDialogHeader(),this.renderDownloadLinkSection()):d.a.createElement("div",{className:"get-app__dialog-body"},this.renderDialogHeader(),d.a.createElement("div",{className:"get-app__buttons"},d.a.createElement("div",{className:"get-app__status"},this.renderGoNativeAppMessage()),d.a.createElement("div",{className:"get-app__status"},d.a.createElement("a",{href:this.state.location,onMouseDown:()=>{this.setPreference(L.s.BROWSER,!0)},onClick:()=>{this.setState({navigating:!0})},className:"btn btn-default btn-lg get-app__continue"},d.a.createElement(p.a,{id:"get_app.continueToBrowser",defaultMessage:"View in Browser"})))),d.a.createElement("div",{className:"get-app__preference"},d.a.createElement("button",{className:"get-app__checkbox ".concat(this.state.rememberChecked?"checked":""),onClick:this.handleChecked},this.renderCheckboxIcon()),d.a.createElement(p.a,{id:"get_app.rememberMyPreference",defaultMessage:"Remember my preference"})),this.renderDownloadLinkSection())),M(this,"renderHeader",()=>{let e=d.a.createElement("div",{className:"get-app__header"},d.a.createElement("img",{src:b.a,className:"get-app__logo"}));if(this.props.enableCustomBrand&&this.props.brandImageUrl){let t;this.props.brandImageUrl&&!this.state.brandImageError&&(t=d.a.createElement("img",{src:this.props.brandImageUrl,onError:this.handleBrandImageError,className:"get-app__custom-logo"})),e=d.a.createElement("div",{className:"get-app__header"},t,d.a.createElement("div",{className:"get-app__custom-site-name"},d.a.createElement("span",null,this.props.siteName)))}return e});const t=window.location.href.replace("/landing#","");this.state={rememberChecked:!1,redirectPage:!1,location:t,nativeLocation:t.replace(/^(https|http)/,"mattermost"),brandImageError:!1,navigating:!1},_.Z()&&!k.a.hasSeenLandingPage()&&k.a.setLandingPageSeen(!0)}componentDidMount(){_.b(this.props.defaultTheme),this.checkLandingPreferenceApp()&&this.openMattermostApp(),window.addEventListener("beforeunload",this.clearLandingPreferenceIfNotChecked)}componentWillUnmount(){window.removeEventListener("beforeunload",this.clearLandingPreferenceIfNotChecked)}render(){const e=v.n();return this.checkLandingPreferenceBrowser()?(this.openInBrowser(),null):d.a.createElement("div",{className:"get-app"},this.renderHeader(),d.a.createElement("div",{className:"get-app__dialog"},d.a.createElement("div",{className:"get-app__graphic ".concat(e?"mobile":"")},this.renderGraphic()),this.renderDialogBody()))}}M(P,"propTypes",{defaultTheme:l.a.any.isRequired,desktopAppLink:l.a.string,iosAppLink:l.a.string,androidAppLink:l.a.string,siteUrl:l.a.string,siteName:l.a.string,brandImageUrl:l.a.string,enableCustomBrand:l.a.bool.isRequired});t.default=Object(n.connect)((function(e){const t=Object(s.getConfig)(e);return{desktopAppLink:t.AppDownloadLink,iosAppLink:t.IosAppDownloadLink,androidAppLink:t.AndroidAppDownloadLink,defaultTheme:Object(i.getTheme)(e),siteUrl:t.SiteURL,siteName:t.SiteName,brandImageUrl:r.Client4.getBrandImageUrl("0"),enableCustomBrand:"true"===t.EnableCustomBrand}}))(P)}}]);
//# sourceMappingURL=15.0de71d6df88586b86f00.js.map